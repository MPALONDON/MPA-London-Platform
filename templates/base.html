<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PSV9FVXY8K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PSV9FVXY8K');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Performance Academy - {% block title %}{% endblock %}</title>
    <meta name="description" content="Join Brentford's leading music school in West London. Expert music lessons for all ages in piano, guitar, voice, drums & more. Start your musical journey today!">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/calendar.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Add this to your existing styles */
        .klarna-info {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            position: relative;
        }

        .klarna-info p {
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
        }

        .klarna-info ul {
            list-style: none;
            padding-left: 0;
            margin-bottom: 0;
        }

        .klarna-info li {
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .klarna-info li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #28a745;
        }

        .klarna-info i {
            color: #0a0a0a;
            margin-right: 5px;
        }

        /* Klarna content styles */
        .klarna-content {
            display: none; /* Initially hidden */
        }

        /* Klarna disclaimer styles */
        .klarna-disclaimer {
            font-size: 0.8rem;
            color: #666;
            margin-top: 1rem;
            line-height: 1.4;
        }
        
        .klarna-disclaimer a {
            color: #2c3e50;
            text-decoration: underline;
        }
        
        .klarna-disclaimer a:hover {
            color: #34495e;
        }

        /* Toggle button styles */
        .klarna-toggle {
            background: none;
            border: none;
            color: #2c3e50;
            font-size: 0.9rem;
            padding: 0;
            margin-top: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            width: 100%;
            justify-content: center;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .klarna-toggle:hover {
            color: #34495e;
            background-color: #e9ecef;
        }

        .klarna-toggle i {
            transition: transform 0.3s ease;
        }

        .klarna-toggle.active i {
            transform: rotate(180deg);
        }
        
        /* Hide mobile elements on desktop by default */
        .mobile-menu-container,
        .mobile-submenu,
        .mobile-menu-toggle {
            display: none;
        }
        
        /* Desktop Navigation Styles */
        @media screen and (min-width: 993px) {
            .nav-links {
                display: flex;
            }
            
            .mobile-menu-toggle {
                display: none !important;
            }
            
            /* Fix for dropdown menus positioned at the right edge of the screen */
            .nav-links .dropdown:last-child .dropdown-menu,
            .nav-links .dropdown:nth-last-child(2) .dropdown-menu {
                right: 0;
                left: auto;
            }
        }
        
        /* Mobile Menu Styles - Only apply to mobile devices */
        @media screen and (max-width: 992px) {
            /* Show mobile toggle and hide desktop nav */
            .mobile-menu-toggle {
                display: block;
                background: none;
                border: none;
                cursor: pointer;
                z-index: 1001;
            }
            
            .nav-links {
                display: none !important;
            }
            
            /* Hamburger menu styles */
            .hamburger {
                width: 30px;
                height: 24px;
                position: relative;
                transition: .5s ease-in-out;
                cursor: pointer;
            }
            
            .hamburger span {
                display: block;
                position: absolute;
                height: 3px;
                width: 100%;
                background: #333;
                border-radius: 3px;
                opacity: 1;
                left: 0;
                transform: rotate(0deg);
                transition: .25s ease-in-out;
            }
            
            .hamburger span:nth-child(1) {
                top: 0px;
            }
            
            .hamburger span:nth-child(2), .hamburger span:nth-child(3) {
                top: 10px;
            }
            
            .hamburger span:nth-child(4) {
                top: 20px;
            }
            
            .hamburger.open span:nth-child(1) {
                top: 10px;
                width: 0%;
                left: 50%;
            }
            
            .hamburger.open span:nth-child(2) {
                transform: rotate(45deg);
            }
            
            .hamburger.open span:nth-child(3) {
                transform: rotate(-45deg);
            }
            
            .hamburger.open span:nth-child(4) {
                top: 10px;
                width: 0%;
                left: 50%;
            }
            
            /* Mobile Menu Overlay */
            .mobile-menu-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background-color: #fff;
                z-index: 1000;
                overflow-y: auto;
                display: none;
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            
            .mobile-menu-container.active {
                display: block;
                opacity: 1;
            }
            
            /* Mobile menu styling */
            .mobile-menu {
                padding: 20px;
                height: 100%;
            }
            
            .mobile-menu-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-bottom: 15px;
                margin-bottom: 20px;
                border-bottom: 1px solid #eee;
            }
            
            .mobile-menu-title {
                font-size: 1.2rem;
                font-weight: 500;
            }
            
            .mobile-menu-close {
                background: none;
                border: none;
                font-size: 1.5rem;
                color: #333;
                cursor: pointer;
            }
            
            .mobile-menu-links a {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px 0;
                border-bottom: 1px solid #f1f1f1;
                font-size: 1.1rem;
                color: #333;
                text-decoration: none;
            }
            
            .mobile-menu-links a i {
                color: #999;
            }
            
            /* Submenu styling */
            .mobile-submenu {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #fff;
                z-index: 1001;
                padding: 20px;
                display: none;
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            
            .mobile-submenu.active {
                display: block;
                opacity: 1;
            }
            
            .mobile-submenu-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-bottom: 15px;
                margin-bottom: 20px;
                border-bottom: 1px solid #eee;
            }
            
            .mobile-submenu-back {
                background: none;
                border: none;
                font-size: 1rem;
                color: #333;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 5px;
            }
            
            .mobile-submenu-title {
                font-size: 1.2rem;
                font-weight: 500;
            }
            
            body.menu-open {
                overflow: hidden;
            }
        }
    </style>
    {% block head %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}" data-user-role="{{ session['user']['role'] if 'user' in session else '' }}" data-user-id="{{ session['user']['id'] if 'user' in session else '' }}">
    <nav class="navbar">
        <div class="nav-brand">
            <a href="{{ url_for('home') }}">
                <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="Music Performance Academy Logo" class="nav-logo">
                <span>Music Performance Academy</span>
            </a>
        </div>
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="nav-links" id="navLinks">
            <div class="dropdown">
                <a href="{{ url_for('lessons') }}" class="nav-link dropdown-toggle">Lessons</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('guitar') }}" class="dropdown-item">Electric Guitar</a></li>
                    <li><a href="{{ url_for('bass') }}" class="dropdown-item">Bass Guitar</a></li>
                    <li><a href="{{ url_for('drums') }}" class="dropdown-item">Drums</a></li>
                    <li><a href="{{ url_for('vocals') }}" class="dropdown-item">Vocals</a></li>
                    <li><a href="{{ url_for('piano_keyboard') }}" class="dropdown-item">Piano & Keyboard <span class="navbar-coming-soon-badge">Coming Soon</span></a></li>
                </ul>
            </div>
            <a href="{{ url_for('band_classes') }}" class="nav-link">Band Classes</a>
            <a href="{{ url_for('guitar_services') }}" class="nav-link">Guitar & Bass Services</a>
            <a href="{{ url_for('weekly_jam') }}" class="nav-link">Weekly Jam</a>
            <a href="{{ url_for('events') }}" class="nav-link">Events</a>
            <a href="{{ url_for('contact') }}" class="nav-link">Contact</a>
            {% if 'user' in session %}
                {% if session['user']['role'] in ['admin', 'staff'] %}
                    <div class="dropdown">
                        <span class="nav-link user-name dropdown-toggle">{{ session['user']['username'] }}</span>
                        <ul class="dropdown-menu">
                            <li><a href="{{ url_for('dashboard') }}" class="dropdown-item"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                            <li><a href="{{ url_for('feedback') }}" class="dropdown-item"><i class="fas fa-comment-dots"></i> Feedback</a></li>
                            <li><a href="{{ url_for('settings') }}" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a></li>
                            {% if session['user']['role'] == 'admin' %}
                            <li><a href="{{ url_for('admin_events') }}" class="dropdown-item"><i class="fas fa-calendar-alt"></i> Events</a></li>
                            <li><a href="{{ url_for('admin_newsletter') }}" class="dropdown-item"><i class="fas fa-envelope"></i> Newsletter</a></li>
                            {% endif %}
                            <li><a href="{{ url_for('signout') }}" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
                        </ul>
                    </div>
                {% else %}
                    <div class="dropdown">
                        <span class="nav-link user-name dropdown-toggle">{{ session['user']['username'] }}</span>
                        <ul class="dropdown-menu">
                            <li><a href="{{ url_for('student_dashboard') }}" class="dropdown-item"><i class="fas fa-tachometer-alt"></i> Student Dashboard</a></li>
                            <li><a href="{{ url_for('student_settings') }}" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a></li>
                            <li><a href="{{ url_for('signout') }}" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
                        </ul>
                    </div>
                {% endif %}
            {% else %}
                <a href="{{ url_for('signin') }}" class="nav-link sign-in-btn"><i class="fas fa-user"></i> Sign In</a>
            {% endif %}
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu-container" id="mobileMenuContainer">
        <!-- Main Menu -->
        <div class="mobile-menu" id="mainMobileMenu">
            <div class="mobile-menu-header">
                <div class="mobile-menu-title">Menu</div>
                <button class="mobile-menu-close" id="mobileMenuClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mobile-menu-links">
                <a href="javascript:void(0)" class="mobile-menu-item" data-submenu="lessonsSubmenu">
                    Lessons <i class="fas fa-chevron-right"></i>
                </a>
                <a href="{{ url_for('band_classes') }}">Band Classes</a>
                <a href="{{ url_for('guitar_services') }}">Guitar & Bass Services</a>
                <a href="{{ url_for('weekly_jam') }}">Weekly Jam</a>
                <a href="{{ url_for('events') }}">Events</a>
                <a href="{{ url_for('contact') }}">Contact</a>
                {% if 'user' in session %}
                    {% if session['user']['role'] in ['admin', 'staff'] %}
                        <a href="javascript:void(0)" class="mobile-menu-item" data-submenu="accountSubmenu">
                            {{ session['user']['username'] }} <i class="fas fa-chevron-right"></i>
                        </a>
                    {% else %}
                        <a href="javascript:void(0)" class="mobile-menu-item" data-submenu="studentSubmenu">
                            {{ session['user']['username'] }} <i class="fas fa-chevron-right"></i>
                        </a>
                    {% endif %}
                {% else %}
                    <a href="{{ url_for('signin') }}"><i class="fas fa-user"></i> Sign In</a>
                {% endif %}
            </div>
        </div>
        
        <!-- Lessons Submenu -->
        <div class="mobile-submenu" id="lessonsSubmenu">
            <div class="mobile-submenu-header">
                <button class="mobile-submenu-back" data-parent="mainMobileMenu">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <div class="mobile-submenu-title">Lessons</div>
            </div>
            <div class="mobile-menu-links">
                <a href="{{ url_for('guitar') }}">Electric Guitar</a>
                <a href="{{ url_for('bass') }}">Bass Guitar</a>
                <a href="{{ url_for('drums') }}">Drums</a>
                <a href="{{ url_for('vocals') }}">Vocals</a>
                <a href="{{ url_for('piano_keyboard') }}">Piano & Keyboard <span class="navbar-coming-soon-badge">Coming Soon</span></a>
            </div>
        </div>
        
        <!-- Account Submenu (Admin/Staff) -->
        {% if 'user' in session and session['user']['role'] in ['admin', 'staff'] %}
        <div class="mobile-submenu" id="accountSubmenu">
            <div class="mobile-submenu-header">
                <button class="mobile-submenu-back" data-parent="mainMobileMenu">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <div class="mobile-submenu-title">Account</div>
            </div>
            <div class="mobile-menu-links">
                <a href="{{ url_for('dashboard') }}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                <a href="{{ url_for('feedback') }}"><i class="fas fa-comment-dots"></i> Feedback</a>
                <a href="{{ url_for('settings') }}"><i class="fas fa-cog"></i> Settings</a>
                {% if session['user']['role'] == 'admin' %}
                <a href="{{ url_for('admin_events') }}"><i class="fas fa-calendar-alt"></i> Events</a>
                <a href="{{ url_for('admin_newsletter') }}"><i class="fas fa-envelope"></i> Newsletter</a>
                {% endif %}
                <a href="{{ url_for('signout') }}"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
            </div>
        </div>
        {% endif %}
        
        <!-- Student Submenu -->
        {% if 'user' in session and session['user']['role'] == 'student' %}
        <div class="mobile-submenu" id="studentSubmenu">
            <div class="mobile-submenu-header">
                <button class="mobile-submenu-back" data-parent="mainMobileMenu">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <div class="mobile-submenu-title">Account</div>
            </div>
            <div class="mobile-menu-links">
                <a href="{{ url_for('student_dashboard') }}"><i class="fas fa-tachometer-alt"></i> Student Dashboard</a>
                <a href="{{ url_for('student_settings') }}"><i class="fas fa-cog"></i> Settings</a>
                <a href="{{ url_for('signout') }}"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
            </div>
        </div>
        {% endif %}
    </div>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Music Performance Academy</h3>
                <p>Empowering musicians through excellence in education</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <div class="quick-links-container">
                    <div class="quick-links-column">
                        <a href="{{ url_for('home') }}">Home</a>
                        <a href="{{ url_for('weekly_jam') }}">Weekly Jam</a>
                        <a href="{{ url_for('contact') }}">Contact</a>
                    </div>
                    <div class="quick-links-column">
                        <a href="{{ url_for('terms') }}">Terms of Business</a>
                        <a href="{{ url_for('privacy') }}">Privacy Policy</a>
                    </div>
                </div>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="https://wa.me/447472555229" class="whatsapp-link" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Get in Touch</h3>
                <p><i class="fas fa-location-dot"></i> 30 Commerce Rd, Brentford, London</p>
                <p><i class="fas fa-phone"></i> +44 7472555229</p>
                <p><i class="fas fa-envelope"></i> info@mpalondon.co.uk</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="current-year"></span> Music Performance Academy Ltd. Company No: 16366012. All rights reserved.</p>
            <a href="{{ url_for('safeguarding') }}" class="safeguarding-button">
                <i class="fas fa-shield-alt"></i> Safeguarding Policies
            </a>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cookie-consent.js') }}"></script>
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Set the current year in the footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Smooth scrolling for contact form links
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToFormLinks = document.querySelectorAll('.scroll-to-form');
            scrollToFormLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const contactForm = document.querySelector('.contact-form-section');
                    if (contactForm) {
                        contactForm.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        });

        // Desktop dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const handleMenus = function() {
                if (window.innerWidth >= 993) {
                    // Desktop behavior
                    const dropdowns = document.querySelectorAll('.nav-links .dropdown');
                    
                    dropdowns.forEach(dropdown => {
                        const link = dropdown.querySelector('.dropdown-toggle');
                        const menu = dropdown.querySelector('.dropdown-menu');
                        
                        // Remove existing event listeners if any
                        link.removeEventListener('mouseenter', showMenu);
                        dropdown.removeEventListener('mouseleave', hideMenu);
                        
                        // Add new event listeners
                        link.addEventListener('mouseenter', showMenu);
                        dropdown.addEventListener('mouseleave', hideMenu);
                        
                        function showMenu() {
                            menu.style.display = 'block';
                        }
                        
                        function hideMenu() {
                            menu.style.display = 'none';
                        }
                    });
                }
            };
            
            // Run once on page load
            handleMenus();
            
            // Also run on window resize
            window.addEventListener('resize', handleMenus);
        });

        // Klarna section toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const klarnaSections = document.querySelectorAll('.klarna-info');
            
            klarnaSections.forEach(section => {
                // Create a wrapper for the content
                const content = section.querySelector('p, ul, .klarna-disclaimer');
                const contentWrapper = document.createElement('div');
                contentWrapper.className = 'klarna-content';
                
                // Move all content except the first paragraph into the wrapper
                while (section.children.length > 1) {
                    contentWrapper.appendChild(section.children[1]);
                }
                section.appendChild(contentWrapper);
                
                // Create and add the toggle button
                const toggleBtn = document.createElement('button');
                toggleBtn.className = 'klarna-toggle';
                toggleBtn.innerHTML = '<i class="fas fa-chevron-down"></i> View payment options';
                
                section.appendChild(toggleBtn);
                
                toggleBtn.addEventListener('click', function() {
                    const isActive = this.classList.contains('active');
                    this.classList.toggle('active');
                    this.innerHTML = isActive ? 
                        '<i class="fas fa-chevron-down"></i> View payment options' : 
                        '<i class="fas fa-chevron-up"></i> Hide payment options';
                    contentWrapper.style.display = isActive ? 'none' : 'block';
                });
            });
        });

        // Mobile Menu Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileMenuClose = document.getElementById('mobileMenuClose');
            const mobileMenuContainer = document.getElementById('mobileMenuContainer');
            const mainMobileMenu = document.getElementById('mainMobileMenu');
            const hamburger = document.querySelector('.hamburger');
            
            // Submenu items
            const menuItems = document.querySelectorAll('.mobile-menu-item');
            const backButtons = document.querySelectorAll('.mobile-submenu-back');
            
            // Function to open mobile menu
            function openMobileMenu() {
                mobileMenuContainer.classList.add('active');
                hamburger.classList.add('open');
                document.body.classList.add('menu-open');
            }
            
            // Function to close mobile menu
            function closeMobileMenu() {
                mobileMenuContainer.classList.remove('active');
                hamburger.classList.remove('open');
                document.body.classList.remove('menu-open');
                
                // Hide all submenus when closing the main menu
                document.querySelectorAll('.mobile-submenu.active').forEach(submenu => {
                    submenu.classList.remove('active');
                });
            }
            
            // Toggle mobile menu
            mobileMenuToggle.addEventListener('click', function() {
                if (mobileMenuContainer.classList.contains('active')) {
                    closeMobileMenu();
                } else {
                    openMobileMenu();
                }
            });
            
            // Close menu when clicking the close button
            mobileMenuClose.addEventListener('click', closeMobileMenu);
            
            // Handle submenu navigation
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const submenuId = this.getAttribute('data-submenu');
                    const submenu = document.getElementById(submenuId);
                    
                    if (submenu) {
                        submenu.classList.add('active');
                    }
                });
            });
            
            // Handle back buttons
            backButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const parentId = this.getAttribute('data-parent');
                    const parent = document.getElementById(parentId);
                    
                    // Hide current submenu
                    this.closest('.mobile-submenu').classList.remove('active');
                });
            });
            
            // Close mobile menu on window resize if screen becomes larger
            window.addEventListener('resize', function() {
                if (window.innerWidth > 992 && mobileMenuContainer.classList.contains('active')) {
                    closeMobileMenu();
                }
            });
        });
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>

<!-- Cookie Consent Banner -->
<div id="cookie-consent-banner" style="display: none;">
    <div class="cookie-content">
        <div class="cookie-text">
            <p>We use cookies to enhance your experience on our website. Some cookies are necessary for the website to function, while others help us understand how you interact with our site. You can choose which cookies to accept.</p>
            <div class="cookie-categories">
                <div class="cookie-category">
                    <h4>Necessary Cookies</h4>
                    <p>These cookies are essential for the website to function properly. They cannot be disabled.</p>
                </div>
                <div class="cookie-category">
                    <h4>Analytics Cookies</h4>
                    <p>These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously.</p>
                </div>
                <div class="cookie-category">
                    <h4>Marketing Cookies</h4>
                    <p>These cookies are used to track visitors across websites to display relevant advertisements.</p>
                </div>
            </div>
            <p>By clicking "Accept", you consent to the use of all cookies. Click "Reject" to only use necessary cookies. <a href="{{ url_for('privacy') }}">Learn more in our Privacy Policy</a></p>
        </div>
        <div class="cookie-buttons">
            <button id="accept-cookies" class="btn btn-primary">Accept</button>
            <button id="reject-cookies" class="btn btn-secondary">Reject</button>
            <button id="cookie-preferences" class="btn btn-outline-light">Cookie Preferences</button>
        </div>
    </div>
</div>

<!-- Cookie Preferences Modal -->
<div class="modal fade" id="cookiePreferencesModal" tabindex="-1" aria-labelledby="cookiePreferencesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cookiePreferencesModalLabel">Cookie Preferences</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="cookie-preference-item">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="analytics-toggle" checked disabled>
                        <label class="form-check-label" for="analytics-toggle">
                            <strong>Necessary Cookies</strong>
                            <p class="text-muted mb-0">These cookies are essential for the website to function properly. They cannot be disabled.</p>
                        </label>
                    </div>
                </div>
                <hr>
                <div class="cookie-preference-item">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="analytics-toggle">
                        <label class="form-check-label" for="analytics-toggle">
                            <strong>Analytics Cookies</strong>
                            <p class="text-muted mb-0">Help us understand how visitors interact with our website by collecting and reporting information anonymously.</p>
                        </label>
                    </div>
                </div>
                <hr>
                <div class="cookie-preference-item">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="marketing-toggle">
                        <label class="form-check-label" for="marketing-toggle">
                            <strong>Marketing Cookies</strong>
                            <p class="text-muted mb-0">Used to track visitors across websites to display relevant advertisements.</p>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="save-preferences">Save Preferences</button>
            </div>
        </div>
    </div>
</div>

<!-- Floating Contact Us Button -->
{% if 'user' not in session %}
<a href="{{ url_for('contact') }}" class="floating-contact-btn" title="Contact Us">
    <i class="fas fa-envelope"></i> Contact Us
</a>
{% endif %} 